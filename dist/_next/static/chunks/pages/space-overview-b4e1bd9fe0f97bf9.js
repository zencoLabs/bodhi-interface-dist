(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{35330:function(e,s,n){"use strict";var r=n(64836);s.Z=void 0;var t=r(n(64938)),a=n(85893);s.Z=(0,t.default)((0,a.jsx)("path",{d:"M12 7.83 15.17 11l1.41-1.41L12 5 7.41 9.59 8.83 11zm0-5L15.17 6l1.41-1.41L12 0 7.41 4.59 8.83 6zm0 18.34L8.83 18l-1.41 1.41L12 24l4.59-4.59L15.17 18zm0-5L8.83 13l-1.41 1.41L12 19l4.59-4.59L15.17 13z"}),"UnfoldMoreDouble")},73370:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/space-overview",function(){return n(57381)}])},57381:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return et}});var r=n(85893),t=n(5616),a=n(67294),i=n(67952),l=n(11163),o=n(59242),d=n(15861),c=n(93946),u=n(53219),x=n(63366),p=n(87462);n(76607);var v=n(90512),m=n(58510),h=n(90948),j=n(33616),f=n(54801),g=n(87952),Z=n(1977),y=n(8027);function b(e){return(0,y.ZP)("MuiAvatarGroup",e)}let I=(0,Z.Z)("MuiAvatarGroup",["root","avatar"]),w=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],F={small:-16,medium:null},C=e=>{let{classes:s}=e;return(0,m.Z)({root:["root"],avatar:["avatar"]},b,s)},S=(0,h.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,s)=>(0,p.Z)({[`& .${I.avatar}`]:s.avatar},s.root)})(({theme:e,ownerState:s})=>{let n=s.spacing&&void 0!==F[s.spacing]?F[s.spacing]:-s.spacing;return{[`& .${f.Z.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:null!=n?n:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}}),A=a.forwardRef(function(e,s){var n;let t=(0,j.Z)({props:e,name:"MuiAvatarGroup"}),{children:i,className:l,component:o="div",componentsProps:d={},max:c=5,renderSurplus:u,slotProps:m={},spacing:h="medium",total:f,variant:Z="circular"}=t,y=(0,x.Z)(t,w),b=c<2?2:c,I=(0,p.Z)({},t,{max:c,spacing:h,component:o,variant:Z}),F=C(I),A=a.Children.toArray(i).filter(e=>a.isValidElement(e)),k=f||A.length;k===b&&(b+=1),b=Math.min(k+1,b);let N=Math.min(A.length,b-1),T=Math.max(k-b,k-N,0),D=u?u(T):`+${T}`,_=null!=(n=m.additionalAvatar)?n:d.additionalAvatar;return(0,r.jsxs)(S,(0,p.Z)({as:o,ownerState:I,className:(0,v.Z)(F.root,l),ref:s},y,{children:[T?(0,r.jsx)(g.Z,(0,p.Z)({variant:Z},_,{className:(0,v.Z)(F.avatar,null==_?void 0:_.className),children:D})):null,A.slice(0,N).reverse().map(e=>a.cloneElement(e,{className:(0,v.Z)(e.props.className,F.avatar),variant:e.props.variant||Z}))]}))});var k=n(69417),N=n(41664),T=n.n(N),D=n(82729),_=n(97975),L=n(31065),M=n(68806),B=n(76312);function E(){let e=(0,D._)(["\n  query GetCreates($assetId: Int!) {\n   creates(where: {assetId: $assetId}) {\n     id\n     assetId\n     arTxId\n     sender\n     blockTimestamp\n     transactionHash\n    }\n  }\n"]);return E=function(){return e},e}let $=(0,M.Ps)(E()),R=e=>{var s,n,t,i;let{assetId:l}=e,{currentTimestamp:o}=(0,L.Yh)(),{data:c,refetch:u}=(0,B.a)($,{variables:{assetId:l}});(0,a.useEffect)(()=>{u()},[o,u]);let x=(null==c?void 0:null===(s=c.creates)||void 0===s?void 0:s.filter(e=>""!==e.arTxId).map(e=>e.arTxId))||[],p=(0,_.lv)(x);return(0,r.jsx)(r.Fragment,{children:p.length>0&&(0,r.jsx)(d.Z,{variant:"secondary14",color:"text.secondary",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:null!==(i=null===(t=p[0])||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.replace(/\n/g,"<br />"))&&void 0!==i?i:""}})})})};var P=n(92900),z=n(49479),V=n(79369),W=n(47036),U=n(47726);let G=e=>{let{sender:s,spaceUserInfo:n,imgWidth:t}=e,{avatar:a,spacename:i}=(0,U.Dm)(s,n);return(0,r.jsx)(g.Z,{sx:{width:t?"".concat(t,"px"):"36px",height:t?"".concat(t,"px"):"36px"},alt:i,src:a})};var X=n(47781),q=n(64032),H=n(78191),Y=n(2623);let O=e=>{var s,n,i,l,x,p,v,m,h,j,f;let{spaceUser:Z}=e,{setTempSpaceModal:y}=(0,X.R)(),{setType:b}=(0,q.a)(),{ethPrice:I,currentTimestamp:w,account:F,setWalletModalOpen:C}=(0,L.Yh)(),{userArray:S,error:N,refetch:D}=(0,o.ki)(Number(null==Z?void 0:Z.descriptionAssetId),4),{loading:M,error:B,data:E}=(0,o.aB)(null!=S?S:[""]),{data:$}=(0,_.k)(Number(null==Z?void 0:Z.descriptionAssetId),Number(null==Z?void 0:null===(s=Z.spaceAsset)||void 0===s?void 0:s.totalSupply));function U(e){if(F){var s,n,r,t;y({assetId:Number(null==Z?void 0:Z.descriptionAssetId),assetSupply:null!==(t=null==Z?void 0:null===(s=Z.spaceAsset)||void 0===s?void 0:s.totalSupply)&&void 0!==t?t:0,spaceId:Number(null==Z?void 0:Z.spaceId),spaceAddress:null==Z?void 0:Z.spaceAddress,spaceCreator:null==Z?void 0:Z.user,totalFees:null==Z?void 0:null===(n=Z.spaceAsset)||void 0===n?void 0:n.totalFees,totalTradValue:null==Z?void 0:null===(r=Z.spaceAsset)||void 0===r?void 0:r.totalTradValue}),1==e?b(q.w.SpaceBuy):2==e?b(q.w.SpaceSell):3==e?b(q.w.SpaceDistribution):b(q.w.SpaceInfo)}else C(!0)}return(0,a.useEffect)(()=>{D()},[w,D]),(0,r.jsx)(t.Z,{children:Z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y.W,{assetId:Number(null==Z?void 0:Z.descriptionAssetId),totalSupply:null!==(v=null==Z?void 0:null===(n=Z.spaceAsset)||void 0===n?void 0:n.totalSupply)&&void 0!==v?v:0,goback:"/space",child:(0,r.jsxs)(d.Z,{children:["Space #",Z.spaceId]})}),(0,r.jsxs)(t.Z,{sx:{mt:3},children:[(0,r.jsx)(t.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsx)(P.M,{sender:Z.user,spaceUserInfo:Z,MoreBox:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:"50%",p:0,minWidth:0},onClick:()=>{U(4)},children:(0,r.jsx)(u.Z,{sx:{fontSize:20,color:"text.muted",borderRadius:"50%","&:hover":{color:"info.main"}},children:(0,r.jsx)(V.Z,{fontSize:"medium",sx:{color:"#d7e2e3"}})})})})})}),Z.descriptionAssetId?(0,r.jsx)(t.Z,{sx:{paddingLeft:"48px",paddingTop:"10px",paddingBottom:"10px"},children:(0,r.jsx)(R,{assetId:Number(Z.descriptionAssetId)})}):(0,r.jsx)(r.Fragment,{})]}),(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:2},children:[(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[(0,r.jsxs)(A,{children:[E&&(0,r.jsxs)(r.Fragment,{children:[null==S?void 0:S.map(e=>(0,r.jsx)(r.Fragment,{children:0==E.spaceFactories.filter(s=>s.user==e).length&&(0,r.jsx)(G,{sender:e,imgWidth:32})})),E.spaceFactories.map(e=>(0,r.jsx)(G,{sender:e.user,spaceUserInfo:e,imgWidth:32}))]}),(0,r.jsx)(g.Z,{sx:{bgcolor:W.Z[500],width:32,height:32},children:(0,r.jsxs)(T(),{href:"/asset-overview?assetid=".concat(null==Z?void 0:Z.descriptionAssetId),children:["   ",(0,r.jsx)(V.Z,{})," "]})})]}),(0,r.jsx)(T(),{href:"/asset-overview?assetid=".concat(null==Z?void 0:Z.descriptionAssetId),children:(0,r.jsx)(z.B,{value:null!==(m=null===(i=Z.spaceAsset)||void 0===i?void 0:i.totalHolders)&&void 0!==m?m:0,symbol:"holders",variant:"secondary16",symbolsVariant:"secondary16",color:"text.primary",symbolsColor:"text.secondary",visibleDecimals:0})})]}),(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[(0,r.jsx)(k.Z,{onClick:()=>{U(1)},variant:"surface",sx:{minWidth:"60px",padding:"4px"},startIcon:(0,r.jsx)(r.Fragment,{}),children:"Buy"}),(0,r.jsx)(k.Z,{onClick:()=>{U(2)},variant:"contained",sx:{minWidth:"60px",padding:"4px"},children:"Sell"})]})]}),(0,r.jsx)(H.m,{title:"Overview",children:(0,r.jsxs)(t.Z,{sx:{display:"grid",gridTemplateColumns:"140px auto auto",gridTemplateRows:"repeat(4, auto)",gap:"10px"},children:[(0,r.jsx)(d.Z,{color:"text.secondary",children:"Revenue"}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(z.B,{value:null!==(h=null===(l=Z.spaceAsset)||void 0===l?void 0:l.totalFees)&&void 0!==h?h:0*(null!=I?I:0),symbol:"USD",variant:"main16",compact:!0,visibleDecimals:3})}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(k.Z,{onClick:()=>{U(3)},variant:"surface_2",sx:{minWidth:"60px",padding:"2px 6px"},children:"Distribution"})}),(0,r.jsx)(d.Z,{color:"text.secondary",children:"Price"}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(z.B,{value:null!=$?$:0,variant:"main16",symbolsVariant:"secondary14",compact:!0,visibleDecimals:3,symbol:"CFX/Share"})}),(0,r.jsx)(t.Z,{}),(0,r.jsx)(d.Z,{color:"text.secondary",children:"Transactions"}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(z.B,{value:Number(null===(x=Z.spaceAsset)||void 0===x?void 0:x.totalTrades)-1,variant:"main16",compact:!0,visibleDecimals:0})}),(0,r.jsx)(t.Z,{}),(0,r.jsx)(d.Z,{color:"text.secondary",children:"Transaction Value "}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(z.B,{value:null!==(f=null===(p=Z.spaceAsset)||void 0===p?void 0:p.totalTradValue)&&void 0!==f?f:0,variant:"main16",symbolsVariant:"secondary14",compact:!0,visibleDecimals:4,symbol:"CFX"})}),(0,r.jsx)(t.Z,{})]})})]})})};var J=n(98456),K=n(40885),Q=n(48454),ee=n(35330);function es(){let e=(0,D._)(['\n  query GetCreates($first: Int!, $skip: Int!, $sender: String!) {\n  creates(\n      skip: $skip\n      first: $first\n       where: {  arTxId_not: "", isContract: false , sender: $sender }\n      orderDirection: desc\n      orderBy: blockTimestamp\n    ) {\n     id\n     assetId\n     arTxId\n     sender\n     blockTimestamp\n     transactionHash\n    }\n  }\n']);return es=function(){return e},e}let en=(0,M.Ps)(es()),er=e=>{let{spaceUserInfo:s}=e,[n,i]=(0,a.useState)([]),[l,o]=(0,a.useState)(0),c=(0,a.useMemo)(()=>new Set,[]),{loading:u,error:x,data:p,refetch:v}=(0,B.a)(en,{variables:{first:20,skip:20*l,sender:null==s?void 0:s.user},client:K.c});return(0,a.useEffect)(()=>{if(p){let e=p.creates.filter(e=>!c.has(e.id));e.forEach(e=>c.add(e.id)),i(s=>[...s,...e])}},[p,c]),(0,r.jsxs)(t.Z,{sx:{mt:8},children:[n.map(e=>(0,r.jsx)(Q.$,{create:e},e.id)),u?(0,r.jsx)(t.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,r.jsx)(J.Z,{color:"inherit",size:32})}):(0,r.jsx)(t.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:p&&20==p.creates.length?(0,r.jsx)(k.Z,{onClick:()=>{o(e=>e+1),v()},endIcon:(0,r.jsx)(ee.Z,{className:"icon-animation"}),children:"Load More"}):(0,r.jsx)(d.Z,{variant:"secondary16",color:"text.secondary",children:"No more."})})]})};function et(){var e;let s=(0,l.useRouter)(),n=null===(e=s.query.address)||void 0===e?void 0:e.toString(),{currentTimestamp:d}=(0,L.Yh)(),{sapceUser:c,loading:u,error:x,refetch:p}=(0,o.qE)(n?n.toLocaleLowerCase():"");return(0,a.useEffect)(()=>{p()},[d,p]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Z,{children:(0,r.jsx)(t.Z,{sx:{display:"flex",flex:1,flexDirection:"column",gap:4},children:u?(0,r.jsx)(r.Fragment,{children:"loading..."}):(0,r.jsx)(r.Fragment,{children:c?(0,r.jsxs)(t.Z,{children:[(0,r.jsx)(O,{spaceUser:c}),(0,r.jsx)(er,{spaceUserInfo:c})]}):(0,r.jsx)(r.Fragment,{children:"No data"})})})})})}},78191:function(e,s,n){"use strict";n.d(s,{m:function(){return i}});var r=n(85893),t=n(5616),a=n(15861);let i=e=>{let{title:s,children:n}=e;return(0,r.jsxs)(t.Z,{sx:{pt:5},children:[(0,r.jsx)(a.Z,{sx:{mb:1},color:"text.secondary",children:(0,r.jsx)(r.Fragment,{children:null!=s?s:"Transaction overview"})}),(0,r.jsx)(t.Z,{sx:e=>({p:3,border:"1px solid ".concat(e.palette.divider),borderRadius:"4px",".MuiBox-root:last-of-type":{mb:0}}),children:n})]})}},2623:function(e,s,n){"use strict";n.d(s,{W:function(){return p}});var r=n(85893),t=n(5616),a=n(15861),i=n(31065),l=n(21023),o=n(41664),d=n.n(o),c=n(11163),u=n(49479),x=n(97975);let p=e=>{let{assetId:s,totalSupply:n,child:o}=e,p=(0,c.useRouter)(),{account:v,ethPrice:m,currentTimestamp:h}=(0,i.Yh)(),{data:j,error:f}=(0,x.TX)(s,n,null!=h?h:0),{data:g,error:Z}=(0,x.bo)(null!=v?v:"",s,null!=h?h:0);return(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#4b4984",border:"1px solid #4b4984",borderRadius:1,padding:"10px",gap:2},children:[(0,r.jsxs)(t.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,r.jsx)(d(),{href:"#",onClick:()=>{document.referrer?p.back():p.push("/")},children:(0,r.jsx)(l.Z,{sx:{color:"#F9FFFE"}})}),o&&(0,r.jsx)(r.Fragment,{children:o})]}),v?(0,r.jsx)(r.Fragment,{children:!f&&!Z&&j&&g?(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"end",alignItems:"flex-end",mt:2,gap:2},children:[(0,r.jsx)(u.B,{value:j*g*(null!=m?m:0),variant:"main21",compact:!0,visibleDecimals:3,symbol:"USD"}),(0,r.jsxs)(a.Z,{children:["My Shares:"," ",g," "," ","(≈ ",(0,r.jsx)(u.B,{value:j*g,compact:!0,visibleDecimals:2,symbol:"CFX"}),")"]})]}):(0,r.jsx)(r.Fragment,{})}):(0,r.jsx)(r.Fragment,{})]})}}},function(e){e.O(0,[240,266,87,930,342,144,973,952,454,774,888,179],function(){return e(e.s=73370)}),_N_E=e.O()}]);