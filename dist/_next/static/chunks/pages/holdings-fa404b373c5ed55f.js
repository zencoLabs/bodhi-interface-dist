(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{51645:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/holdings",function(){return r(12431)}])},12431:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(85893),n=r(67294),i=r(67952),a=r(5616),o=r(15861),l=r(82729),u=r(68806),c=r(76312),d=r(31065),h=r(97975);function y(){let e=(0,l._)(["\nquery GetUserAssets($first: Int!, $skip: Int!, $address: String!) {\n   userAssets(\n    where: {user_: {address: $address}}\n    orderBy: assetId\n    orderDirection: desc\n    skip: $skip\n    first: $first\n  ) {\n    assetId\n    amount\n    user {\n      address\n    }\n    asset {\n      totalSupply\n      totalTrades \n      totalFees\n      totalHolders\n      creator {\n        address\n        isContract\n      }\n    }\n  }\n}\n"]);return y=function(){return e},e}let m=(0,u.Ps)(y());var f=r(49479),p=r(11163);let b=e=>{let{item:t,ethPrice:r}=e,n=(0,p.useRouter)();return(0,s.jsxs)(a.Z,{sx:{backgroundColor:"#312f5c",mt:3,borderRadius:2,padding:"10px",display:"flex",flexDirection:"row",alignItems:"center",gap:4,cursor:"pointer","&:hover":{backgroundColor:"#38366a"}},component:"div",onClick:()=>{n.push("/asset-overview/?assetid=".concat(t.assetId))},children:[(0,s.jsxs)(a.Z,{sx:{backgroundColor:"#75cedb",minWidth:"90px",minHeight:"90px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:1,borderRadius:"4px"},children:[(0,s.jsxs)("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 16 16",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),(0,s.jsx)("path",{d:"M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"})]}),(0,s.jsx)("span",{children:"Txt"})]}),(0,s.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1},children:[(0,s.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,s.jsxs)(o.Z,{variant:"secondary16",color:"text.secondary",children:["#",t.assetId]}),t.userAddress===t.creatorAddress&&(0,s.jsx)(o.Z,{variant:"secondary16",color:"#36df66",children:"owner"})]}),(0,s.jsxs)(o.Z,{variant:"secondary16",color:"text.secondary",children:[(0,s.jsx)(f.B,{value:t.amount,variant:"secondary16",symbolsVariant:"secondary16",color:"text.secondary",symbolsColor:"text.secondary",visibleDecimals:2,symbol:"Shares"})," ","( â‰ˆ ",(0,s.jsx)(f.B,{value:Number(t.amount)*Number(t.amountETH),variant:"secondary16",symbolsVariant:"secondary16",color:"text.secondary",symbolsColor:"text.secondary",visibleDecimals:4,symbol:"CFX"}),")"]}),(0,s.jsx)(o.Z,{sx:{mt:0},children:(0,s.jsx)(f.B,{value:Number(t.amount)*Number(t.amountETH)*(null!=r?r:0),variant:"main21",symbolsVariant:"main21",color:"text.primary",symbolsColor:"text.primary",visibleDecimals:4,symbol:"USD"})})]})]})};var x=r(42292);function v(){let{account:e,ethPrice:t}=(0,d.Yh)(),{loading:r,userAssets:l,totalAmountETH:u,totalFees:y}=function(e){var t;let{currentTimestamp:r}=(0,d.Yh)(),[s,i]=(0,n.useState)(0),{loading:a,error:o,data:l,refetch:u}=(0,c.a)(m,{variables:{first:100,skip:100*s,address:e}}),y=!o&&l?l.userAssets.map(e=>({assetId:e.assetId,amount:e.amount,userAddress:e.user.address,totalSupply:e.asset.totalSupply,totalTrades:e.asset.totalTrades,totalFees:e.asset.totalFees,totalHolders:e.asset.totalHolders,creatorAddress:e.asset.creator.address,isContract:e.asset.creator.isContract})).filter(e=>!1==e.isContract):void 0,f=(0,h.r2)(null!=y?y:[]),p=y?y.map((e,r)=>{var s;return{...e,amountETH:null!==(t=null===(s=f[r])||void 0===s?void 0:s.data)&&void 0!==t?t:0}}):[],b=p.reduce((e,t)=>e+Number(t.amount),0),x=p.reduce((e,t)=>e+Number(t.amount)*Number(t.amountETH),0),v=p.reduce((e,t)=>t.userAddress===t.creatorAddress?e+Number(t.totalFees):e,0),g=p.reduce((e,t)=>e+Number(t.totalHolders),0);return(0,n.useEffect)(()=>{u()},[r,u]),{loading:a,userAssets:p,totalAmount:b,totalAmountETH:x,totalFees:v,totalHolders:g}}(null!=e?e:x._);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.Z,{children:(0,s.jsxs)(a.Z,{sx:{display:"flex",flex:1,flexDirection:"column",gap:4},children:[(0,s.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsxs)(o.Z,{variant:"secondary16",color:"text.secondary",children:["Total: ",l.length," Assets"]}),(0,s.jsx)(a.Z,{sx:{mt:2},children:(0,s.jsx)(f.B,{value:Number(u)*(null!=t?t:0),variant:"main21",symbolsVariant:"main21",color:"text.primary",symbolsColor:"text.primary",visibleDecimals:4,symbol:"USD"})}),(0,s.jsx)(a.Z,{sx:{mb:2},children:(0,s.jsx)(f.B,{value:u,variant:"secondary16",symbolsVariant:"secondary16",color:"text.secondary",symbolsColor:"text.secondary",visibleDecimals:4,symbol:"CFX"})}),(0,s.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:1},children:[(0,s.jsx)(o.Z,{variant:"secondary16",color:"text.primary",children:"Creator Fee Received:"}),(0,s.jsx)(f.B,{value:Number(y)*(null!=t?t:0),variant:"secondary16",symbolsVariant:"secondary16",color:"text.primary",symbolsColor:"text.primary",visibleDecimals:4,symbol:"USD"})]})]}),r?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column"},children:l.map((e,r)=>(0,s.jsx)(b,{item:e,ethPrice:t},r))})]})})})}},97975:function(e,t,r){"use strict";r.d(t,{TX:function(){return d},bo:function(){return h},c1:function(){return l},k:function(){return c},lv:function(){return o},r2:function(){return u}});var s=r(31065),n=r(46154),i=r(99673),a=r(88144);let o=e=>{let t=(0,s.Yh)(e=>e.fetchArweaveData),r=(0,i.h)({queries:e.map(e=>({queryKey:["arweaveData",e],queryFn:()=>t(e),refetchInterval:6e4}))});return r},l=e=>{let{data:t,error:r}=(0,a.a)({queryKey:["useGetTransactionInfo",e],queryFn:()=>(0,n.Q1)(e),refetchInterval:6e4});return r?void 0:t},u=e=>{let t=(0,s.Yh)(e=>e.getBuyPrice),r=(0,i.h)({queries:e.map(e=>({queryKey:["getBuyPrice",e.assetId,e.totalSupply],queryFn:()=>t(e.assetId,1,e.totalSupply),refetchInterval:6e4}))});return r},c=(e,t)=>{let r=(0,s.Yh)(e=>e.getBuyPrice),{data:n,error:i}=(0,a.a)({queryKey:["getBuyPrice",e,t],queryFn:()=>r(e,1,t),refetchInterval:6e4});return{data:n,error:i}},d=(e,t,r)=>{let n=(0,s.Yh)(e=>e.getSellPrice),{data:i,error:o}=(0,a.a)({queryKey:["getSellPrice",e,t,r],queryFn:()=>n(e,1,t),refetchInterval:6e4});return{data:i,error:o}},h=(e,t,r)=>{let n=(0,s.Yh)(e=>e.getBalanceByAccount_Asset),{data:i,error:o}=(0,a.a)({queryKey:["getBalanceByAccount_Asset",t,e,r],queryFn:()=>n(e,t),refetchInterval:6e4});return{data:i,error:o}}},99673:function(e,t,r){"use strict";r.d(t,{h:function(){return f}});var s=r(67294),n=r(27037),i=r(72536),a=r(7506),o=r(24139);function l(e,t){return e.filter(e=>!t.includes(e))}var u=class extends a.l{#e;#t;#r;#s;#n;#i;#a;constructor(e,t,r){super(),this.#e=e,this.#r=[],this.#s=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#s.forEach(e=>{e.subscribe(t=>{this.#o(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#s.forEach(e=>{e.destroy()})}setQueries(e,t,r){this.#r=e,n.V.batch(()=>{let e=this.#s,t=this.#l(this.#r);t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions,r));let s=t.map(e=>e.observer),n=s.map(e=>e.getCurrentResult()),i=s.some((t,r)=>t!==e[r]);(e.length!==s.length||i)&&(this.#s=s,this.#t=n,this.hasListeners()&&(l(e,s).forEach(e=>{e.destroy()}),l(s,e).forEach(e=>{e.subscribe(t=>{this.#o(e,t)})}),this.#u()))})}getCurrentResult(){return this.#t}getQueries(){return this.#s.map(e=>e.getCurrentQuery())}getObservers(){return this.#s}getOptimisticResult(e,t){let r=this.#l(e),s=r.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[s,e=>this.#c(e??s,t),()=>r.map((e,t)=>{let n=s[t];return e.defaultedQueryOptions.notifyOnChangeProps?n:e.observer.trackResult(n,e=>{r.forEach(t=>{t.observer.trackProp(e)})})})]}#c(e,t){return t?(this.#n&&this.#t===this.#a&&t===this.#i||(this.#i=t,this.#a=this.#t,this.#n=(0,o.Q$)(this.#n,t(e))),this.#n):e}#l(e){let t=this.#s,r=new Map(t.map(e=>[e.options.queryHash,e])),s=e.map(e=>this.#e.defaultQueryOptions(e)),n=s.flatMap(e=>{let t=r.get(e.queryHash);return null!=t?[{defaultedQueryOptions:e,observer:t}]:[]}),a=new Set(n.map(e=>e.defaultedQueryOptions.queryHash)),o=s.filter(e=>!a.has(e.queryHash)),l=e=>{let t=this.#e.defaultQueryOptions(e),r=this.#s.find(e=>e.options.queryHash===t.queryHash);return r??new i.z(this.#e,t)},u=o.map(e=>({defaultedQueryOptions:e,observer:l(e)}));return n.concat(u).sort((e,t)=>s.indexOf(e.defaultedQueryOptions)-s.indexOf(t.defaultedQueryOptions))}#o(e,t){let r=this.#s.indexOf(e);-1!==r&&(this.#t=function(e,t,r){let s=e.slice(0);return s[t]=r,s}(this.#t,r,t),this.#u())}#u(){n.V.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}},c=r(30202),d=r(2762),h=r(37323),y=r(9160),m=r(44590);function f({queries:e,...t},r){let a=(0,c.NL)(r),o=(0,d.S)(),l=(0,h._)(),f=s.useMemo(()=>e.map(e=>{let t=a.defaultQueryOptions(e);return t._optimisticResults=o?"isRestoring":"optimistic",t}),[e,a,o]);f.forEach(e=>{(0,m.Fb)(e),(0,y.pf)(e,l)}),(0,y.JN)(l);let[p]=s.useState(()=>new u(a,f,t)),[b,x,v]=p.getOptimisticResult(f,t.combine);s.useSyncExternalStore(s.useCallback(e=>o?()=>void 0:p.subscribe(n.V.batchCalls(e)),[p,o]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),s.useEffect(()=>{p.setQueries(f,t,{listeners:!1})},[f,t,p]);let g=b.some((e,t)=>(0,m.SB)(f[t],e)),j=g?b.flatMap((e,t)=>{let r=f[t];if(r){let t=new i.z(a,r);if((0,m.SB)(r,e))return(0,m.j8)(r,t,l);(0,m.Z$)(e,o)&&(0,m.j8)(r,t,l)}return[]}):[];if(j.length>0)throw Promise.all(j);let C=b.find((e,t)=>{let r=f[t];return r&&(0,y.KJ)({result:e,errorResetBoundary:l,throwOnError:r.throwOnError,query:a.getQueryCache().get(r.queryHash)})});if(C?.error)throw C.error;return x(v())}}},function(e){e.O(0,[240,266,87,930,342,144,952,774,888,179],function(){return e(e.s=51645)}),_N_E=e.O()}]);