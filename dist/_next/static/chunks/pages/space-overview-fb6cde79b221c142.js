(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{35330:function(e,s,n){"use strict";var r=n(64836);s.Z=void 0;var t=r(n(64938)),a=n(85893);s.Z=(0,t.default)((0,a.jsx)("path",{d:"M12 7.83 15.17 11l1.41-1.41L12 5 7.41 9.59 8.83 11zm0-5L15.17 6l1.41-1.41L12 0 7.41 4.59 8.83 6zm0 18.34L8.83 18l-1.41 1.41L12 24l4.59-4.59L15.17 18zm0-5L8.83 13l-1.41 1.41L12 19l4.59-4.59L15.17 13z"}),"UnfoldMoreDouble")},73370:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/space-overview",function(){return n(57381)}])},57381:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return ea}});var r=n(85893),t=n(61730),a=n(5616),i=n(67294),l=n(67952),o=n(11163),d=n(59242),c=n(15861),u=n(93946),x=n(53219),p=n(63366),v=n(87462);n(76607);var m=n(90512),h=n(58510),j=n(90948),f=n(33616),g=n(54801),Z=n(87952),y=n(1977),b=n(8027);function I(e){return(0,b.ZP)("MuiAvatarGroup",e)}let w=(0,y.Z)("MuiAvatarGroup",["root","avatar"]),F=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],C={small:-16,medium:null},S=e=>{let{classes:s}=e;return(0,h.Z)({root:["root"],avatar:["avatar"]},I,s)},A=(0,j.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,s)=>(0,v.Z)({[`& .${w.avatar}`]:s.avatar},s.root)})(({theme:e,ownerState:s})=>{let n=s.spacing&&void 0!==C[s.spacing]?C[s.spacing]:-s.spacing;return{[`& .${g.Z.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:null!=n?n:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}}),k=i.forwardRef(function(e,s){var n;let t=(0,f.Z)({props:e,name:"MuiAvatarGroup"}),{children:a,className:l,component:o="div",componentsProps:d={},max:c=5,renderSurplus:u,slotProps:x={},spacing:h="medium",total:j,variant:g="circular"}=t,y=(0,p.Z)(t,F),b=c<2?2:c,I=(0,v.Z)({},t,{max:c,spacing:h,component:o,variant:g}),w=S(I),C=i.Children.toArray(a).filter(e=>i.isValidElement(e)),k=j||C.length;k===b&&(b+=1),b=Math.min(k+1,b);let N=Math.min(C.length,b-1),T=Math.max(k-b,k-N,0),D=u?u(T):`+${T}`,_=null!=(n=x.additionalAvatar)?n:d.additionalAvatar;return(0,r.jsxs)(A,(0,v.Z)({as:o,ownerState:I,className:(0,m.Z)(w.root,l),ref:s},y,{children:[T?(0,r.jsx)(Z.Z,(0,v.Z)({variant:g},_,{className:(0,m.Z)(w.avatar,null==_?void 0:_.className),children:D})):null,C.slice(0,N).reverse().map(e=>i.cloneElement(e,{className:(0,m.Z)(e.props.className,w.avatar),variant:e.props.variant||g}))]}))});var N=n(69417),T=n(41664),D=n.n(T),_=n(82729),L=n(97975),M=n(31065),B=n(68806),E=n(76312);function $(){let e=(0,_._)(["\n  query GetCreates($assetId: Int!) {\n   creates(where: {assetId: $assetId}) {\n     id\n     assetId\n     arTxId\n     sender\n     blockTimestamp\n     transactionHash\n    }\n  }\n"]);return $=function(){return e},e}let R=(0,B.Ps)($()),P=e=>{var s,n,t,a;let{assetId:l}=e,{currentTimestamp:o}=(0,M.Yh)(),{loading:d,error:u,data:x,refetch:p}=(0,E.a)(R,{variables:{assetId:l}});(0,i.useEffect)(()=>{p()},[o,p]);let v=(null==x?void 0:null===(s=x.creates)||void 0===s?void 0:s.filter(e=>""!==e.arTxId).map(e=>e.arTxId))||[],m=(0,L.lv)(v);return(0,r.jsx)(r.Fragment,{children:m.length>0&&(0,r.jsx)(c.Z,{variant:"secondary14",color:"text.secondary",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:null!==(a=null===(t=m[0])||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.replace(/\n/g,"<br />"))&&void 0!==a?a:""}})})})};var z=n(92900),V=n(49479),W=n(79369),U=n(47036),G=n(47726);let X=e=>{let{sender:s,spaceUserInfo:n,imgWidth:t}=e,{avatar:a,spacename:i}=(0,G.Dm)(s,n);return(0,r.jsx)(Z.Z,{sx:{width:t?"".concat(t,"px"):"36px",height:t?"".concat(t,"px"):"36px"},alt:i,src:a})};var q=n(47781),H=n(64032),Y=n(78191),O=n(2623);let J=e=>{var s,n,t,l,o,p,v,m,h,j,f;let{spaceUser:g}=e,{setTempSpaceModal:y}=(0,q.R)(),{setType:b}=(0,H.a)(),{ethPrice:I,currentTimestamp:w,account:F,setWalletModalOpen:C}=(0,M.Yh)(),{userArray:S,error:A,refetch:T}=(0,d.ki)(Number(null==g?void 0:g.descriptionAssetId),4),{loading:_,error:B,data:E}=(0,d.aB)(null!=S?S:[""]),{data:$}=(0,L.k)(Number(null==g?void 0:g.descriptionAssetId),Number(null==g?void 0:null===(s=g.spaceAsset)||void 0===s?void 0:s.totalSupply));function R(e){if(F){var s,n,r,t;y({assetId:Number(null==g?void 0:g.descriptionAssetId),assetSupply:null!==(t=null==g?void 0:null===(s=g.spaceAsset)||void 0===s?void 0:s.totalSupply)&&void 0!==t?t:0,spaceId:Number(null==g?void 0:g.spaceId),spaceAddress:null==g?void 0:g.spaceAddress,spaceCreator:null==g?void 0:g.user,totalFees:null==g?void 0:null===(n=g.spaceAsset)||void 0===n?void 0:n.totalFees,totalTradValue:null==g?void 0:null===(r=g.spaceAsset)||void 0===r?void 0:r.totalTradValue}),1==e?b(H.w.SpaceBuy):2==e?b(H.w.SpaceSell):3==e?b(H.w.SpaceDistribution):b(H.w.SpaceInfo)}else C(!0)}return(0,i.useEffect)(()=>{T()},[w,T]),(0,r.jsx)(a.Z,{children:g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.W,{assetId:Number(null==g?void 0:g.descriptionAssetId),totalSupply:null!==(v=null==g?void 0:null===(n=g.spaceAsset)||void 0===n?void 0:n.totalSupply)&&void 0!==v?v:0,goback:"/space",child:(0,r.jsxs)(c.Z,{children:["Space #",g.spaceId]})}),(0,r.jsxs)(a.Z,{sx:{mt:3},children:[(0,r.jsx)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsx)(z.M,{sender:g.user,spaceUserInfo:g,MoreBox:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:"50%",p:0,minWidth:0},onClick:()=>{R(4)},children:(0,r.jsx)(x.Z,{sx:{fontSize:20,color:"text.muted",borderRadius:"50%","&:hover":{color:"info.main"}},children:(0,r.jsx)(W.Z,{fontSize:"medium",sx:{color:"#d7e2e3"}})})})})})}),g.descriptionAssetId?(0,r.jsx)(a.Z,{sx:{paddingLeft:"48px",paddingTop:"10px",paddingBottom:"10px"},children:(0,r.jsx)(P,{assetId:Number(g.descriptionAssetId)})}):(0,r.jsx)(r.Fragment,{})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:2},children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[(0,r.jsxs)(k,{children:[E&&(0,r.jsxs)(r.Fragment,{children:[null==S?void 0:S.map(e=>(0,r.jsx)(r.Fragment,{children:0==E.spaceFactories.filter(s=>s.user==e).length&&(0,r.jsx)(X,{sender:e,imgWidth:32})})),E.spaceFactories.map(e=>(0,r.jsx)(X,{sender:e.user,spaceUserInfo:e,imgWidth:32}))]}),(0,r.jsx)(Z.Z,{sx:{bgcolor:U.Z[500],width:32,height:32},children:(0,r.jsxs)(D(),{href:"/asset-overview?assetid=".concat(null==g?void 0:g.descriptionAssetId),children:["   ",(0,r.jsx)(W.Z,{})," "]})})]}),(0,r.jsx)(D(),{href:"/asset-overview?assetid=".concat(null==g?void 0:g.descriptionAssetId),children:(0,r.jsx)(V.B,{value:null!==(m=null===(t=g.spaceAsset)||void 0===t?void 0:t.totalHolders)&&void 0!==m?m:0,symbol:"holders",variant:"secondary16",symbolsVariant:"secondary16",color:"text.primary",symbolsColor:"text.secondary",visibleDecimals:0})})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[(0,r.jsx)(N.Z,{onClick:()=>{R(1)},variant:"surface",sx:{minWidth:"60px",padding:"4px"},startIcon:(0,r.jsx)(r.Fragment,{}),children:"Buy"}),(0,r.jsx)(N.Z,{onClick:()=>{R(2)},variant:"contained",sx:{minWidth:"60px",padding:"4px"},children:"Sell"})]})]}),(0,r.jsx)(Y.m,{title:"Overview",children:(0,r.jsxs)(a.Z,{sx:{display:"grid",gridTemplateColumns:"140px auto auto",gridTemplateRows:"repeat(4, auto)",gap:"10px"},children:[(0,r.jsx)(c.Z,{color:"text.secondary",children:"Revenue"}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(V.B,{value:null!==(h=null===(l=g.spaceAsset)||void 0===l?void 0:l.totalFees)&&void 0!==h?h:0*(null!=I?I:0),symbol:"USD",variant:"main16",compact:!0,visibleDecimals:3})}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(N.Z,{onClick:()=>{R(3)},variant:"surface_2",sx:{minWidth:"60px",padding:"2px 6px"},children:"Distribution"})}),(0,r.jsx)(c.Z,{color:"text.secondary",children:"Price"}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(V.B,{value:null!=$?$:0,variant:"main16",symbolsVariant:"secondary14",compact:!0,visibleDecimals:3,symbol:"CFX/Share"})}),(0,r.jsx)(a.Z,{}),(0,r.jsx)(c.Z,{color:"text.secondary",children:"Transactions"}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(V.B,{value:Number(null===(o=g.spaceAsset)||void 0===o?void 0:o.totalTrades)-1,variant:"main16",compact:!0,visibleDecimals:0})}),(0,r.jsx)(a.Z,{}),(0,r.jsx)(c.Z,{color:"text.secondary",children:"Transaction Value "}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(V.B,{value:null!==(f=null===(p=g.spaceAsset)||void 0===p?void 0:p.totalTradValue)&&void 0!==f?f:0,variant:"main16",symbolsVariant:"secondary14",compact:!0,visibleDecimals:4,symbol:"CFX"})}),(0,r.jsx)(a.Z,{})]})})]})})};var K=n(98456),Q=n(40885),ee=n(48454),es=n(35330);function en(){let e=(0,_._)(['\n  query GetCreates($first: Int!, $skip: Int!, $sender: String!) {\n  creates(\n      skip: $skip\n      first: $first\n       where: {  arTxId_not: "", isContract: false , sender: $sender }\n      orderDirection: desc\n      orderBy: blockTimestamp\n    ) {\n     id\n     assetId\n     arTxId\n     sender\n     blockTimestamp\n     transactionHash\n    }\n  }\n']);return en=function(){return e},e}let er=(0,B.Ps)(en()),et=e=>{let{spaceUserInfo:s}=e,[n,t]=(0,i.useState)([]),[l,o]=(0,i.useState)(0),d=(0,i.useMemo)(()=>new Set,[]),{loading:u,error:x,data:p,refetch:v}=(0,E.a)(er,{variables:{first:20,skip:20*l,sender:null==s?void 0:s.user},client:Q.c});return(0,i.useEffect)(()=>{if(p){let e=p.creates.filter(e=>!d.has(e.id));e.forEach(e=>d.add(e.id)),t(s=>[...s,...e])}},[p,d]),(0,r.jsxs)(a.Z,{sx:{mt:8},children:[n.map(e=>(0,r.jsx)(ee.$,{create:e},e.id)),u?(0,r.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,r.jsx)(K.Z,{color:"inherit",size:32})}):(0,r.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:p&&20==p.creates.length?(0,r.jsx)(N.Z,{onClick:()=>{o(e=>e+1),v()},endIcon:(0,r.jsx)(es.Z,{className:"icon-animation"}),children:"Load More"}):(0,r.jsx)(c.Z,{variant:"secondary16",color:"text.secondary",children:"No more."})})]})};function ea(){var e;(0,t.Z)("(max-width:980px)");let s=(0,o.useRouter)(),n=null===(e=s.query.address)||void 0===e?void 0:e.toString(),{currentTimestamp:c}=(0,M.Yh)(),{sapceUser:u,loading:x,error:p,refetch:v}=(0,d.qE)(n?n.toLocaleLowerCase():"");return(0,i.useEffect)(()=>{v()},[c,v]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{children:(0,r.jsx)(a.Z,{sx:{display:"flex",flex:1,flexDirection:"column",gap:4},children:x?(0,r.jsx)(r.Fragment,{children:"loading..."}):(0,r.jsx)(r.Fragment,{children:u?(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(J,{spaceUser:u}),(0,r.jsx)(et,{spaceUserInfo:u})]}):(0,r.jsx)(r.Fragment,{children:"No data"})})})})})}},78191:function(e,s,n){"use strict";n.d(s,{m:function(){return i}});var r=n(85893),t=n(5616),a=n(15861);let i=e=>{let{title:s,children:n}=e;return(0,r.jsxs)(t.Z,{sx:{pt:5},children:[(0,r.jsx)(a.Z,{sx:{mb:1},color:"text.secondary",children:(0,r.jsx)(r.Fragment,{children:null!=s?s:"Transaction overview"})}),(0,r.jsx)(t.Z,{sx:e=>({p:3,border:"1px solid ".concat(e.palette.divider),borderRadius:"4px",".MuiBox-root:last-of-type":{mb:0}}),children:n})]})}},2623:function(e,s,n){"use strict";n.d(s,{W:function(){return p}});var r=n(85893),t=n(5616),a=n(15861),i=n(31065),l=n(21023),o=n(41664),d=n.n(o),c=n(11163),u=n(49479),x=n(97975);let p=e=>{let{assetId:s,totalSupply:n,goback:o,child:p}=e,v=(0,c.useRouter)(),{account:m,ethPrice:h,currentTimestamp:j}=(0,i.Yh)(),{data:f,error:g}=(0,x.TX)(s,n,null!=j?j:0),{data:Z,error:y}=(0,x.bo)(null!=m?m:"",s,null!=j?j:0);return(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#4b4984",border:"1px solid #4b4984",borderRadius:1,padding:"10px",gap:2},children:[(0,r.jsxs)(t.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,r.jsx)(d(),{href:"#",onClick:()=>{document.referrer?v.back():v.push("/")},children:(0,r.jsx)(l.Z,{sx:{color:"#F9FFFE"}})}),p&&(0,r.jsx)(r.Fragment,{children:p})]}),m?(0,r.jsx)(r.Fragment,{children:!g&&!y&&f&&Z?(0,r.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"end",alignItems:"flex-end",mt:2,gap:2},children:[(0,r.jsx)(u.B,{value:f*Z*(null!=h?h:0),variant:"main21",compact:!0,visibleDecimals:3,symbol:"USD"}),(0,r.jsxs)(a.Z,{children:["My Shares:"," ",Z," "," ","(â‰ˆ ",(0,r.jsx)(u.B,{value:f*Z,compact:!0,visibleDecimals:2,symbol:"CFX"}),")"]})]}):(0,r.jsx)(r.Fragment,{})}):(0,r.jsx)(r.Fragment,{})]})}}},function(e){e.O(0,[240,266,87,930,170,144,973,952,454,774,888,179],function(){return e(e.s=73370)}),_N_E=e.O()}]);