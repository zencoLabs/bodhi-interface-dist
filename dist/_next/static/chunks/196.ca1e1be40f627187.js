"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[196],{63023:function(e,n){Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.module.reference")},76607:function(e,n,t){t(63023)},57144:function(e,n,t){var i=t(86145);n.Z=i.Z},8038:function(e,n,t){var i=t(36425);n.Z=i.Z},5340:function(e,n,t){var i=t(96613);n.Z=i.Z},33286:function(e,n,t){t.d(n,{l:function(){return r}});var i=t(85893),s=t(67294),a=t(57333);let r=s.forwardRef(function(e,n){let{onChange:t,...s}=e;return(0,i.jsx)(a.Z,{...s,getInputRef:n,onValueChange:n=>{n.value!==e.value&&t({target:{name:e.name,value:n.value||""}})},thousandSeparator:!0,isNumericString:!0,allowNegative:!1})})},26384:function(e,n,t){t.d(n,{G:function(){return y}});var i=t(85893),s=t(82313),a=t(5616),r=t(15861),o=t(93946),l=t(53219),c=t(67294),d=t(90948),u=t(16078),p=t(34386),x=t(23926);let m=(0,d.ZP)(u.Z)(e=>{let{theme:n}=e;return{".MuiTooltip-tooltip":{color:"text.primary",backgroundColor:"#312f5c",p:0,borderRadius:"6px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.3), 0px 2px 10px rgba(0, 0, 0, 0.2)",maxWidth:"280px"},".MuiTooltip-arrow":{color:"#312f5c","&:before":{boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.3), 0px 2px 10px rgba(0, 0, 0, 0.2)"}}}}),f=e=>{let{children:n,tooltipContent:t,placement:s="top",withoutHover:r,open:o,setOpen:l,offset:d}=e,[u,f]=(0,c.useState)(!1),y=void 0!==o?o:u,h=()=>void 0!==l?l(!y):f(!y),b=()=>void 0!==l?l(!1):f(!1);return(0,i.jsx)(p.Z,{sx:{},open:y,onClose:b,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:s,PopperComponent:m,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:null!=d?d:[]}}],onClick:e=>{e.stopPropagation()}}},title:(0,i.jsx)(x.d,{mouseEvent:"onMouseDown",touchEvent:"onTouchStart",onClickAway:b,children:(0,i.jsx)(a.Z,{sx:{background:"#312f5c",py:4,px:6,fontSize:"12px",lineHeight:"16px",a:{fontSize:"12px",lineHeight:"16px",fontWeight:500,"&:hover":{textDecoration:"underline"}},color:"text.primary"},children:t})}),arrow:!0,children:(0,i.jsx)(a.Z,{sx:{display:"inline-flex",cursor:"pointer",transition:"all 0.2s ease","&:hover":{opacity:r?1:y?1:.5}},onClick:e=>{e.preventDefault(),e.stopPropagation(),h()},children:n})})},y=e=>{let{text:n,icon:t,iconSize:d=14,iconColor:u,iconMargin:p,children:x,textColor:m,wrapperProps:{sx:y,...h}={},open:b=!1,setOpen:g,...j}=e,[v,Z]=(0,c.useState)(b);return(0,i.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",...y},...h,children:[n&&(0,i.jsx)(r.Z,{...j,color:m,children:n}),(0,i.jsx)(f,{tooltipContent:(0,i.jsx)(i.Fragment,{children:x}),open:v,setOpen:()=>{g&&g(!v),Z(!v)},children:(0,i.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:d,height:d,borderRadius:"50%",p:0,minWidth:0,ml:p||.5},onClick:()=>{},children:(0,i.jsx)(l.Z,{sx:{fontSize:d,color:u||(v?"info.main":"text.muted"),borderRadius:"50%","&:hover":{color:u||"info.main"}},children:t||(0,i.jsx)(s.Z,{})})})})]})}},78191:function(e,n,t){t.d(n,{m:function(){return r}});var i=t(85893),s=t(5616),a=t(15861);let r=e=>{let{title:n,children:t}=e;return(0,i.jsxs)(s.Z,{sx:{pt:5},children:[(0,i.jsx)(a.Z,{sx:{mb:1},color:"text.secondary",children:(0,i.jsx)(i.Fragment,{children:null!=n?n:"Transaction overview"})}),(0,i.jsx)(s.Z,{sx:e=>({p:3,border:"1px solid ".concat(e.palette.divider),borderRadius:"4px",".MuiBox-root:last-of-type":{mb:0}}),children:t})]})}},36840:function(e,n,t){t.d(n,{Y:function(){return a}});var i=t(85893),s=t(26384);let a=e=>{let{...n}=e;return(0,i.jsx)(s.G,{...n,children:(0,i.jsxs)(i.Fragment,{children:["Share price will go up when more people buy. And you can sell it anytime.",(0,i.jsx)("br",{}),"price = 0.00006 * supply^2"]})})}},49479:function(e,n,t){t.d(n,{B:function(){return c}});var i=t(85893),s=t(70794);function a(e){return e instanceof s.O?e:new s.O(e)}s.O.clone({DECIMAL_PLACES:0,ROUNDING_MODE:s.O.ROUND_DOWN});var r=t(15861);let o=["","K","M","B","T","P","E","Z","Y"];function l(e){let{value:n,visibleDecimals:t=2}=e,s=a(n),r=s.toFixed(0).length,l=Math.min(Math.floor(r?(r-1)/3:0),o.length-1),c=o[l],d=a(s).shiftedBy(-1*(3*l)).toNumber();return(0,i.jsxs)(i.Fragment,{children:[new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}).format(d),c]})}function c(e){let{value:n,symbol:t,visibleDecimals:s,compact:a,percent:o,symbolsVariant:c,symbolsColor:d,...u}=e,p=o?100*Number(n):Number(n),x=s;0===p?x=0:void 0===s&&(x=p>1||o||"USD"===t?2:6);let m=10**-x,f=0!==p&&Math.abs(p)<Math.abs(m),y=f?m:p,h=!1!==a&&(a||p>99999);return(0,i.jsxs)(r.Z,{className:"formatted-number-apt",...u,sx:{display:"inline-flex",flexDirection:"row",alignItems:"center",position:"relative",...u.sx},noWrap:!0,children:[f&&(0,i.jsx)(r.Z,{component:"span",sx:{mr:.5},variant:c||u.variant,color:d||"text.secondary",children:"<"}),(null==t?void 0:t.toLowerCase())==="usd"&&!o&&(0,i.jsx)(r.Z,{component:"span",sx:{mr:.5},variant:c||u.variant,color:d||"text.secondary",children:"$"}),!h&&y>0?new Intl.NumberFormat("en-US",{maximumFractionDigits:x,minimumFractionDigits:x}).format(y):(0,i.jsx)(l,{value:y,visibleDecimals:x}),o&&(0,i.jsx)(r.Z,{component:"span",sx:{ml:.5},variant:c||u.variant,color:d||"text.secondary",children:"%"}),(null==t?void 0:t.toLowerCase())!=="usd"&&void 0!==t&&(0,i.jsx)(r.Z,{component:"span",sx:{ml:.5},variant:c||u.variant,color:d||"text.secondary",children:t})]})}},36444:function(e,n,t){t.d(n,{X:function(){return r}});var i=t(85893),s=t(5616),a=t(15861);let r=e=>{let{caption:n,children:t,captionVariant:r="secondary16",captionColor:o,align:l="center",...c}=e;return(0,i.jsxs)(s.Z,{...c,sx:{display:"flex",alignItems:l,justifyContent:"space-between",...c.sx},children:[n&&(0,i.jsx)(a.Z,{component:"div",variant:r,color:o,sx:{mr:2},children:n}),t]})}},98462:function(e,n,t){t.r(n),t.d(n,{AssetBuyModal:function(){return B}});var i=t(85893),s=t(64032),a=t(56836),r=t(15861),o=t(5616),l=t(20916),c=t(40044),d=t(67294),u=t(69417),p=t(11298),x=t(87109),m=t(98456),f=t(78191),y=t(49479),h=t(36840),b=t(36444),g=t(33286),j=t(31065),v=t(74187),Z=t(77294),S=t(35553),C=t(7979),w=t(10084),T=t(19215);let D=e=>{let{assetId:n,totalSupply:t}=e,{close:a}=(0,s.a)(),{account:l,signer:c,getBuyPriceAfterFee:D,ethPrice:I}=(0,j.Yh)(),[M,k]=(0,d.useState)(0),[L,B]=(0,d.useState)(0),[R,N]=(0,d.useState)(!1),{refetchBodhiData:F}=(0,T.n)();async function A(){let e=await D(n,M,t);B(null!=e?e:0)}async function O(){if(0!=L&&0!=M){N(!0);try{let e=v.TT[v.KY].tradeHelper,t=new Z.CH(e,C,c),i=S.fi(L.toString()),s=S.vz(M.toString(),18),r={from:l,to:e,value:i,data:t.interface.encodeFunctionData("safeBuy",[n,s])},o=await t.provider.estimateGas(r);console.log("gasLimit:",o.toNumber());let d=null==c?void 0:c.sendTransaction({...r,gasLimit:o});null==d||d.then(e=>{e.wait().then(e=>{1===e.status?((0,w.L)(!0,"Confirm Success."),F&&F()):(0,w.L)(!1,"Confirm failure."),N(!1),a()}).catch(e=>{N(!1),(0,w.L)(!1,e.reason)})}).catch(e=>{N(!1),(0,w.L)(!1,e.reason)})}catch(e){N(!1),-32603===e.code&&-32015==e.data.code?(0,w.L)(!1,"Insufficient funds for gas."):(0,w.L)(!1,"Confirm failure.")}}}return(0,d.useEffect)(()=>{M&&0!==M?A():B(0)},[M]),(0,i.jsxs)(o.Z,{sx:{mt:8,display:"flex",flexDirection:"column",gap:4},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"6px"},children:[(0,i.jsx)(r.Z,{variant:"secondary16",color:"text.secondary",children:"Amount"}),(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",gap:1},children:[(0,i.jsx)(u.Z,{onClick:()=>{k(10)},sx:{minWidth:"20px"},children:"10"}),(0,i.jsx)(u.Z,{onClick:()=>{k(50)},sx:{minWidth:"20px"},children:"50"}),(0,i.jsx)(u.Z,{onClick:()=>{k(100)},sx:{minWidth:"20px"},children:"100"}),(0,i.jsx)(u.Z,{onClick:()=>{k(500)},sx:{minWidth:"20px"},children:"500"})]})]}),(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",gap:3},children:(0,i.jsx)(p.ZP,{sx:{flex:1,border:"1px solid #3c4454",borderRadius:1,padding:"4px 10px",backgroundColor:"#3f3d73"},placeholder:"0.00",value:M,autoFocus:!0,onChange:e=>{k(Number(e.target.value))},inputProps:{"aria-label":"amount input",style:{fontSize:"18px",lineHeight:"24,01px",height:"24px"}},endAdornment:(0,i.jsx)(x.Z,{position:"end",children:(0,i.jsx)(r.Z,{children:"share"})}),inputComponent:g.l})})]}),(0,i.jsx)(f.m,{children:(0,i.jsx)(b.X,{caption:(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,i.jsx)(r.Z,{color:"text.secondary",children:"Shares Value"}),(0,i.jsx)(h.Y,{})]}),captionVariant:"description",mb:2,children:(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)(r.Z,{children:[" ",(0,i.jsx)(y.B,{value:L,variant:"secondary14",compact:!0,visibleDecimals:4,symbol:"CFX"})]}),(0,i.jsxs)(r.Z,{children:["(",(0,i.jsx)(y.B,{value:L*(null!=I?I:0),variant:"secondary14",symbol:"USD"}),")"]})]})})}),(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",mt:6},children:(0,i.jsxs)(u.Z,{variant:L>0?"surface":"contained",disabled:R,onClick:O,size:"large",sx:{borderRadius:2,minHeight:"44px"},"data-cy":"actionButton",children:[R&&(0,i.jsx)(m.Z,{color:"inherit",size:"16px",sx:{mr:2}}),R?"Signing":"Confirm Buy"]})})]})};var I=t(2593),M=t(91783);let k=e=>{let{assetId:n,totalSupply:t}=e,{refetchBodhiData:a}=(0,T.n)(),{close:l}=(0,s.a)(),{account:c,signer:C,getSellPriceAfterFee:D,getBalanceByAccount_Asset:k,ethPrice:L}=(0,j.Yh)(),[B,R]=(0,d.useState)(0),[N,F]=(0,d.useState)(0),[A,O]=(0,d.useState)(0),[z,W]=(0,d.useState)(!1);async function E(){let e=await D(n,B,t);O(null!=e?e:0)}async function H(){if(0!=A&&0!=B){if(0==N){(0,w.L)(!1," Insufficient balance.");return}W(!0);try{let e=v.TT[v.KY].bodhi,t=new Z.CH(e,M,C),i=S.vz(B.toString(),18),s={from:c,to:e,value:I.O$.from(0),data:t.interface.encodeFunctionData("sell",[n,i])},r=await t.provider.estimateGas(s);console.log("gasLimit:",r.toNumber());let o=null==C?void 0:C.sendTransaction({...s,gasLimit:r});null==o||o.then(e=>{e.wait().then(e=>{1===e.status?((0,w.L)(!0,"Confirm Success."),a&&a()):(0,w.L)(!1,"Confirm failure."),W(!1),l()}).catch(e=>{W(!1),(0,w.L)(!1,e.reason)})}).catch(e=>{W(!1),(0,w.L)(!1,e.reason)})}catch(e){W(!1),-32603===e.code&&-32015==e.data.code?(0,w.L)(!1,"Insufficient funds for gas."):(0,w.L)(!1,"Confirm failure.")}}}return(0,d.useEffect)(()=>{c&&(async()=>{let e=await k(c,n);F(null!=e?e:0)})()},[n,c]),(0,d.useEffect)(()=>{B&&0!==B?E():O(0)},[B]),(0,i.jsxs)(o.Z,{sx:{mt:8,display:"flex",flexDirection:"column",gap:4},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"6px"},children:[(0,i.jsx)(r.Z,{variant:"secondary16",color:"text.secondary",children:"Amount"}),(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",gap:1},children:[(0,i.jsx)(u.Z,{onClick:()=>{R(.25*N)},sx:{minWidth:"20px"},children:"25%"}),(0,i.jsx)(u.Z,{onClick:()=>{R(.5*N)},sx:{minWidth:"20px"},children:"50%"}),(0,i.jsx)(u.Z,{onClick:()=>{R(.75*N)},sx:{minWidth:"20px"},children:"75%"}),(0,i.jsx)(u.Z,{onClick:()=>{R(1*N)},sx:{minWidth:"20px"},children:"Max"})]})]}),(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,i.jsx)(p.ZP,{sx:{flex:1,border:"1px solid #3c4454",borderRadius:1,padding:"4px 10px",backgroundColor:"#3f3d73"},placeholder:"0.00",value:B,autoFocus:!0,onChange:e=>{R(Number(e.target.value))},inputProps:{"aria-label":"amount input",style:{fontSize:"18px",lineHeight:"24,01px",height:"24px"}},endAdornment:(0,i.jsx)(x.Z,{position:"end",children:(0,i.jsx)(r.Z,{children:"share"})}),inputComponent:g.l}),(0,i.jsx)(o.Z,{sx:{padding:"0px 0px 0px 0px",display:"flex",justifyContent:"space-between"},children:(0,i.jsxs)(r.Z,{component:"div",sx:{display:"flex",gap:"10px",alignItems:"center"},variant:"secondary16",color:"text.secondary",children:[(0,i.jsx)(i.Fragment,{children:"Balance: "}),(0,i.jsx)(y.B,{value:N,compact:!0,symbolsColor:"text.disabled"})]})})]})]}),(0,i.jsx)(f.m,{children:(0,i.jsx)(b.X,{caption:(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,i.jsx)(r.Z,{color:"text.secondary",children:"Shares Value"}),(0,i.jsx)(h.Y,{})]}),captionVariant:"description",mb:2,children:(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)(r.Z,{children:[" ",(0,i.jsx)(y.B,{value:A,variant:"secondary14",compact:!0,visibleDecimals:4,symbol:"CFX"})]}),(0,i.jsxs)(r.Z,{children:["(",(0,i.jsx)(y.B,{value:A*(null!=L?L:0),variant:"secondary14",symbol:"USD"}),")"]})]})})}),(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",mt:6},children:(0,i.jsxs)(u.Z,{variant:A>0?"surface":"contained",disabled:z,onClick:H,size:"large",sx:{borderRadius:2,minHeight:"44px"},"data-cy":"actionButton",children:[z&&(0,i.jsx)(m.Z,{color:"inherit",size:"16px",sx:{mr:2}}),z?"Signing":"Confirm Sell"]})})]})};var L=t(47781);let B=()=>{var e,n;let{type:t,close:u}=(0,s.a)(),{tempAssetModal:p}=(0,L.R)(),[x,m]=(0,d.useState)(0);async function f(){u()}return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.P,{open:t===s.w.AssetBuy,setOpen:f,contentMaxWidth:420,children:[(0,i.jsxs)(r.Z,{variant:"h2",sx:{mb:4},children:[0==x?"Buy":"Sell"," shares #",null==p?void 0:p.assetId]}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(l.Z,{value:x,onChange:(e,n)=>{m(n)},centered:!0,sx:{minHeight:"36px","& .MuiTabs-indicator":{backgroundColor:"#75cedb"},"& .Mui-selected":{color:"#75cedb"}},children:[(0,i.jsx)(c.Z,{label:"Buy",className:"bodhi-tabs",sx:{minHeight:"36px",fontSize:"0.975rem","&.Mui-selected":{color:"#75cedb"}}}),(0,i.jsx)(c.Z,{label:"Sell",className:"bodhi-tabs",sx:{minHeight:"36px",fontSize:"0.975rem","&.Mui-selected":{color:"#75cedb"}}})]})}),0==x&&(0,i.jsx)(D,{assetId:null==p?void 0:p.assetId,totalSupply:null!==(e=null==p?void 0:p.assetSupply)&&void 0!==e?e:0}),1==x&&(0,i.jsx)(k,{assetId:null==p?void 0:p.assetId,totalSupply:null!==(n=null==p?void 0:p.assetSupply)&&void 0!==n?n:0})]})})}},10084:function(e,n,t){t.d(n,{L:function(){return s},V:function(){return a}}),t(67294);var i=t(55678);function s(e,n){e?i.Am.success(n,{autoClose:5e3,position:"top-right",theme:"light",closeOnClick:!0,style:{borderRadius:"6px"}}):i.Am.error("".concat(n),{autoClose:2500,position:"top-right",theme:"light",closeOnClick:!0,style:{borderRadius:"6px"}})}function a(e,n){e?i.Am.success(n,{autoClose:5e3,position:"top-right",theme:"light",closeOnClick:!0,style:{borderRadius:"6px"}}):i.Am.error("".concat(n),{autoClose:2500,position:"top-right",theme:"light",closeOnClick:!0,style:{borderRadius:"6px"}})}},47781:function(e,n,t){t.d(n,{R:function(){return s}});var i=t(64529);let s=(0,i.Ue)(e=>({setTempAssetModal(n){e({tempAssetModal:n})},setTempSpaceModal(n){e({tempSpaceModal:n})},setTempSelectMemuIndex(n){e({tempSelectMemuIndex:n})}}))},7979:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"assetId","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"safeBuy","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_bodhi","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"assetId","type":"uint256"},{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"ethAmount","type":"uint256"}],"name":"SafeBuy","type":"event"},{"inputs":[],"name":"bodhi","outputs":[{"internalType":"contract IBodhi","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}}]);