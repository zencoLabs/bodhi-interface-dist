"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{32964:function(e,n,t){var r=t(64836);n.Z=void 0;var s=r(t(64938)),a=t(85893);n.Z=(0,s.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline")},92900:function(e,n,t){t.d(n,{M:function(){return c}});var r=t(85893),s=t(47726),a=t(5616),i=t(15861),l=t(87952);t(67294);let c=e=>{let{sender:n,blockTimestamp:t,spaceUserInfo:c,imgWidth:o,showSpaceId:d,handleClick:u,MoreBox:x}=e,{avatar:h,spacename:p}=(0,s.Dm)(n,c);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer"},component:"div",onClick:()=>{u&&u()},children:[d&&(0,r.jsxs)(i.Z,{variant:"main16",sx:{mr:2},children:["#",null==c?void 0:c.spaceId]}),(0,r.jsx)(l.Z,{sx:{width:o?"".concat(o,"px"):"36px",height:o?"".concat(o,"px"):"36px"},alt:p,src:h}),(0,r.jsxs)(a.Z,{sx:{ml:2},children:[(0,r.jsx)(i.Z,{variant:"main16",children:p}),(0,r.jsx)(i.Z,{variant:"secondary14",color:"text.secondary",children:(0,s.Xe)(n,4,4)})]})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:3},children:[t&&(0,r.jsx)(a.Z,{children:(0,r.jsx)(i.Z,{variant:"secondary14",color:"text.secondary",children:(0,s.i$)(t)})}),x&&(0,r.jsx)(a.Z,{children:x})]})]})}},60355:function(e,n,t){t.d(n,{H:function(){return x}});var r=t(85893),s=t(5616),a=t(69417),i=t(15861),l=t(49479),c=t(20261),o=t(31065),d=t(64032),u=t(97975);let x=e=>{let{totalSupply:n,assetId:t,handleClick:x,showUnit:h}=e,{setType:p}=(0,d.a)(),{account:f,ethPrice:m,setWalletModalOpen:v}=(0,o.Yh)(),{data:g,error:y}=(0,u.k)(t,n);async function j(){f?(p(d.w.AssetBuy),x&&x()):v(!0)}return(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(a.Z,{variant:"text",startIcon:(0,r.jsx)(c.Z,{}),sx:{padding:"2px 0px",minWidth:"20px"},onClick:()=>{j()},children:(0,r.jsx)(l.B,{value:!y&&g?g*(null!=m?m:0):0,symbol:"USD",variant:"secondary16",symbolsVariant:"secondary16",visibleDecimals:3})}),h&&(0,r.jsx)(i.Z,{color:"text.secondary",sx:{ml:4},component:"div",onClick:()=>{j()},children:(0,r.jsx)(l.B,{value:null!=g?g:0,variant:"secondary14",compact:!0,visibleDecimals:3,symbol:"CFX/Share"})})]})}},85119:function(e,n,t){t.d(n,{p:function(){return c}});var r=t(85893),s=t(69417),a=t(49479),i=t(78878),l=t(11163);let c=e=>{let{assetId:n,holdersCount:t,handleClick:c}=e,o=(0,l.useRouter)();return(0,r.jsx)(s.Z,{variant:"text",startIcon:(0,r.jsx)(i.Z,{}),sx:{padding:"2px 6px",minWidth:"20px"},onClick:()=>{c&&c(),o.push("/asset-overview/?assetid=".concat(n))},children:(0,r.jsx)(a.B,{value:null!=t?t:0,variant:"secondary16",symbolsVariant:"secondary16",visibleDecimals:0})})}},17567:function(e,n,t){t.d(n,{e:function(){return Z}});var r=t(85893),s=t(5616),a=t(93946),i=t(53219),l=t(35294),c=t(18972),o=t(15861),d=t(59334),u=t(79369),x=t(67294),h=t(46907),p=t(11359),f=t(10084),m=t(31065),v=t(74187),g=t(77294),y=t(2593),j=t(91783),I=t(19215);let Z=e=>{var n;let{assetId:t,assetData:Z}=e,{account:b,signer:w,spaceUserInfo:C}=(0,m.Yh)(),{refetchBodhiData:k}=(0,I.n)(),[S,F]=(0,x.useState)(null),H=!!S,B=()=>{F(null)};async function D(){try{let e=v.TT[v.KY].bodhi,n=new g.CH(e,j,w),r={from:b,to:e,value:y.O$.from(0),data:n.interface.encodeFunctionData("remove",[t])},s=await n.provider.estimateGas(r);console.log("gasLimit:",s.toNumber());let a=null==w?void 0:w.sendTransaction({...r,gasLimit:s});null==a||a.then(e=>{e.wait().then(e=>{1===e.status?(0,f.L)(!0,"Remove Success."):(0,f.L)(!1,"Confirm failure."),k&&k()}).catch(e=>{(0,f.L)(!1,e.reason)})}).catch(e=>{(0,f.L)(!1,e.reason)})}catch(e){-32603===e.code&&-32015==e.data.code?(0,f.L)(!1,"Insufficient funds for gas."):(0,f.L)(!1,"Confirm failure.")}}return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:18,height:18,borderRadius:"50%",p:0,minWidth:0},onClick:e=>{F(e.currentTarget)},children:(0,r.jsx)(i.Z,{sx:{fontSize:18,color:H?"info.main":"text.muted",borderRadius:"50%","&:hover":"info.main"},children:(0,r.jsx)(u.Z,{fontSize:"medium",sx:{color:"#d7e2e3"}})})}),(0,r.jsxs)(l.Z,{id:"withdraw-item-extra-menu",anchorEl:S,open:H,onClose:B,keepMounted:!0,PaperProps:{sx:{minWidth:"120px",py:0}},sx:{"& .MuiMenu-paper":{backgroundColor:"#2e2c56",boxShadow:"3px 3px 2px #1e1d35"}},children:[(0,r.jsxs)(c.Z,{sx:{gap:2},onClick:()=>{B(),(0,f.L)(!1," Coming soon!")},children:[(0,r.jsx)(p.Z,{color:"info",fontSize:"small"}),(0,r.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(d.Z,{sx:{},children:"Share on"}),(0,r.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{height:"14px"},children:(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z",fill:"#ffffff"})})})]})]}),b==(null===(n=Z.creator)||void 0===n?void 0:n.address)&&(null==C?void 0:C.descriptionAssetId)!==t.toString()?(0,r.jsxs)(c.Z,{sx:{gap:2},onClick:()=>{B(),D()},children:[(0,r.jsx)(h.Z,{color:"error",fontSize:"small"}),(0,r.jsx)(d.Z,{sx:{color:"#ff0000"},children:"Delete"})]}):(0,r.jsx)(r.Fragment,{})]})]})}},48454:function(e,n,t){t.d(n,{$:function(){return b}});var r=t(85893),s=t(90629),a=t(5616),i=t(67294),l=t(59242),c=t(11163),o=t(31065),d=t(97975),u=t(92900),x=t(47781),h=e=>{let{content:n}=e,t=function(e){if(!e)return"";let n=e.replace(/<[^>]*>?/gm,""),t=n.slice(0,140);return t.length<n.length?t+"...":t}(n),s=function(e){if(!e)return null;let n=/<img[^>]+src=['"]([^'"]+)['"][^>]*>/g.exec(e);if(n){let e=n[1];return(0,r.jsx)("img",{src:e,alt:"Arweave Image",width:"100%",style:{maxHeight:"80px",borderRadius:"4px"}})}return null}(n);return(0,r.jsx)(r.Fragment,{children:n&&(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{flex:"1 1 auto"},children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:t},style:{lineHeight:"24px",letterSpacing:"0.05em",cursor:"pointer"}})}),s&&(0,r.jsx)(a.Z,{sx:{width:"120px",minHeight:"80px",flex:"0 0 auto"},component:"div",className:"content-view-img",children:s})]})})},p=t(69417),f=t(49479),m=t(32964);let v=e=>{let{replyCount:n,handleClick:t}=e,{account:s,setWalletModalOpen:a}=(0,o.Yh)();async function i(){s?t&&t():a(!0)}return(0,r.jsx)(p.Z,{variant:"text",startIcon:(0,r.jsx)(m.Z,{}),sx:{padding:"2px 6px",minWidth:"20px"},onClick:()=>{i()},children:(0,r.jsx)(f.B,{value:null!=n?n:0,variant:"secondary16",symbolsVariant:"secondary16",visibleDecimals:0})})};var g=t(60355),y=t(85119),j=t(17567),I=e=>{let{content:n}=e,t=function(e){if(!e)return"";let n=e.replace(/<[^>]*>?/gm,""),t=n.slice(0,110);return t.length<n.length?t+"...":t}(n),s=function(e){if(!e)return null;let n=/<img[^>]+src=['"]([^'"]+)['"][^>]*>/g.exec(e);if(n){let e=n[1];return(0,r.jsx)("img",{src:e,alt:"Arweave Image",style:{width:"80px",height:"80px"}})}return null}(n);return(0,r.jsx)(r.Fragment,{children:n&&(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{flex:"1 1 auto"},children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:t},style:{lineHeight:"24px",letterSpacing:"0.05em",cursor:"pointer"}})}),s&&(0,r.jsx)(a.Z,{sx:{width:"80px",height:"80px",flex:"0 0 auto"},component:"div",className:"content-view-img",children:s})]})})},Z=t(85518);let b=e=>{var n,t,p,f,m,b;let{create:w}=e,{currentTimestamp:C}=(0,o.Yh)(),{setTempAssetModal:k}=(0,x.R)(),S=(0,c.useRouter)(),{loading:F,error:H,data:B,refetch:D}=(0,l.iG)([Number(w.assetId)]),{loading:T,error:q,data:L,refetch:M}=(0,l.DI)([Number(w.assetId)]),{loading:Y,error:_,data:A,refetch:P}=(0,l.aB)([w.sender]),z=(0,d.lv)([w.arTxId]),K=(0,i.useMemo)(()=>B&&B.assets.length>0?B.assets[0]:void 0,[B]);function N(e){var n,t;k({id:e.id,assetId:e.assetId,arTxId:e.arTxId,sender:e.sender,blockTimestamp:e.blockTimestamp,transactionHash:e.transactionHash,contentData:null===(n=z[0])||void 0===n?void 0:n.data,spaceUserInfo:null==A?void 0:A.spaceFactories.find(n=>n.user==e.sender),assetSupply:null!==(t=null==K?void 0:K.totalSupply)&&void 0!==t?t:0})}return(0,i.useEffect)(()=>{D(),M(),P()},[C,D]),(0,r.jsx)(r.Fragment,{children:K&&!1==K.isDelete?(0,r.jsxs)(s.Z,{sx:e=>({padding:"12px",background:"#312f5c"}),children:[(0,r.jsx)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsx)(r.Fragment,{children:A&&(0,r.jsx)(u.M,{blockTimestamp:w.blockTimestamp,sender:w.sender,spaceUserInfo:null==A?void 0:A.spaceFactories.find(e=>e.user==w.sender),handleClick:()=>{S.push("/space-overview/?address=".concat(w.sender))},MoreBox:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j.e,{assetId:w.assetId,assetData:K})})},w.sender)})}),(0,r.jsx)(a.Z,{sx:{mt:3,color:"#d7e2e3"},component:"div",onClick:()=>{N(w),S.push("/asset-overview/?assetid=".concat(w.assetId))},children:(0,r.jsx)(r.Fragment,{children:(null===(n=z[0])||void 0===n?void 0:n.data)&&(0,r.jsx)(r.Fragment,{children:Z.tq?(0,r.jsx)(I,{content:null===(p=z[0])||void 0===p?void 0:p.data}):(0,r.jsx)(h,{content:null===(t=z[0])||void 0===t?void 0:t.data})})})}),(0,r.jsxs)(a.Z,{sx:{mt:3,pt:1,borderTop:"1px solid #434b59",display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(a.Z,{children:!q&&(0,r.jsx)(v,{replyCount:null==L?void 0:null===(f=L.spaceCounts.find(e=>e.parentId==w.assetId))||void 0===f?void 0:f.count,handleClick:()=>{N(w),S.push("/asset-overview/?assetid=".concat(w.assetId,"&reply=1"))}})}),(0,r.jsxs)(a.Z,{sx:{display:"flex",gap:4},children:[(0,r.jsx)(g.H,{assetId:w.assetId,totalSupply:null!==(m=K.totalSupply)&&void 0!==m?m:0,handleClick:()=>{N(w)}}),(0,r.jsx)(y.p,{assetId:w.assetId,holdersCount:null!==(b=K.totalHolders)&&void 0!==b?b:0,handleClick:()=>{N(w)}})]})]})]}):(0,r.jsx)(r.Fragment,{})})}},97975:function(e,n,t){t.d(n,{TX:function(){return u},bo:function(){return x},c1:function(){return c},k:function(){return d},lv:function(){return l},r2:function(){return o}});var r=t(31065),s=t(46154),a=t(99673),i=t(88144);let l=e=>{let n=(0,r.Yh)(e=>e.fetchArweaveData),t=(0,a.h)({queries:e.map(e=>({queryKey:["arweaveData",e],queryFn:()=>n(e),refetchInterval:6e4}))});return t},c=e=>{let{data:n,error:t}=(0,i.a)({queryKey:["useGetTransactionInfo",e],queryFn:()=>(0,s.Q1)(e),refetchInterval:6e4});return t?void 0:n},o=e=>{let n=(0,r.Yh)(e=>e.getBuyPrice),t=(0,a.h)({queries:e.map(e=>({queryKey:["getBuyPrice",e.assetId,e.totalSupply],queryFn:()=>n(e.assetId,1,e.totalSupply),refetchInterval:6e4}))});return t},d=(e,n)=>{let t=(0,r.Yh)(e=>e.getBuyPrice),{data:s,error:a}=(0,i.a)({queryKey:["getBuyPrice",e,n],queryFn:()=>t(e,1,n),refetchInterval:6e4});return{data:s,error:a}},u=(e,n,t)=>{let s=(0,r.Yh)(e=>e.getSellPrice),{data:a,error:l}=(0,i.a)({queryKey:["getSellPrice",e,n,t],queryFn:()=>s(e,1,n),refetchInterval:6e4});return{data:a,error:l}},x=(e,n,t)=>{let s=(0,r.Yh)(e=>e.getBalanceByAccount_Asset),{data:a,error:l}=(0,i.a)({queryKey:["getBalanceByAccount_Asset",n,e,t],queryFn:()=>s(e,n),refetchInterval:6e4});return{data:a,error:l}}}}]);